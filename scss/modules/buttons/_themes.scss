// 
// Buttons Themes and Styles
// ========================

// Button Theme
@mixin button-style(
	$style: $button-style,
	$theme: $button-theme
) {
	@extend %ext-button-#{$style} !optional;
	@extend %theme-button-#{$theme} !optional;
}

// Default Button Style and Theme

%ext-button-default {
	@extend %button;
	@include transition((border-color, background-color, color));
}

@mixin theme-button-default(
	$color: $color-primary,
	$type-color: foregroundColor($color, $color-default: $color-light),
	$type-color-hover: $type-color,
	$bg-color: $color,
	$bg-color-hover: lighten($bg-color, 5%),
	$border-color: darken($bg-color, 10%),
	$border-color-hover: darken($bg-color-hover, 10%),
	$quiet: false
) {
	@if $color == transparent {
		background-color: transparent;
		border: none;
	} @else {
		@if $quiet == false {	
			&, & > * { color: $type-color; }
			
			background-color: $bg-color;
			border-color: $border-color;

			&:disabled {
				color: $type-color !important;
				background-color: $bg-color !important;
				border-color: $border-color !important;
			}

			&:hover, &:active {
				color: $type-color-hover;
				background-color: $bg-color-hover;
				border-color: $border-color-hover;
			}

			&:focus {
				outline: 1px solid white;
				outline-offset: -2px;
			}
		} @else {
			background-color: transparent;
			border-color: transparent;

			&:hover, &:active {
				color: $type-color;
				background-color: $bg-color;
				border-color: $border-color;
			}
		}

		&:active {
			// TODO
		}
	}
}

%theme-button-default {
	%button {
		@include transition((border-color, background-color, color));
	}
	
	// Default style
	%button:not(.link):not(.quiet) {	
		@include theme-button-default;
	}

	// Normal styles
	%button:not(.quiet) {
		&.primary { @include theme-button-default($color-primary); }
		&.secondary { @include theme-button-default($color-secondary); }
		&.light { @include theme-button-default($color-light); }
		&.dark { @include theme-button-default($color-dark); }
	}

	// Quiet styles
	%button.quiet {
		@include theme-button-default($quiet: true);

		&.primary { @include theme-button-default($color-primary, $quiet: true); }
		&.secondary { @include theme-button-default($color-secondary, $quiet: true); }
		&.light { @include theme-button-default($color-light, $quiet: true); }
		&.dark { @include theme-button-default($color-dark, $quiet: true); }
	}

	// Link style
	%button.link {
		@include theme-button-default(transparent, $bg-color-hover: transparent, $border-color: transparent, $border-color-hover: transparent);
	}
}

@include add-theme('button', $button-theme);

// Transparent Button Style and Theme
%ext-button-transparent {
	@extend %button;
	@include transition((border-color, background-color, color));
}

@mixin theme-button-transparent($color: $color-primary, $color-text: $color) {
	background-color: transparent;
	border-color: $color;

	@if $color-text != auto {
		color: $color-text;
	}

	&:hover, &:active {
		background-color: $color;
		border-color: $color;

		@if $color-text != auto {
			color: foregroundColor($color);
		}
	}
}

%theme-button-transparent {
	%button {
		@include theme-button-transparent;

		&.primary { @include theme-button-transparent($color-primary); }
		&.secondary { @include theme-button-transparent($color-secondary); }
		&.light { @include theme-button-transparent($color-light); }
		&.dark { @include theme-button-transparent($color-dark); }
	}
}

