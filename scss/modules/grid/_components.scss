// 
// Grid Components
// ===============

%content, %pad {
    padding: $grid-content-padding;
}

%pad-vertical {
    padding-top: $grid-content-padding;
    padding-bottom: $grid-content-padding;
}

%pad-horizontal {
    padding-left: $grid-content-padding;
    padding-right: $grid-content-padding;
}

%pad-small {
	padding: $grid-content-padding-small;
}

%pad-vertical-small {
    padding-top: $grid-content-padding-small;
    padding-bottom: $grid-content-padding-small;
}

%pad-horizontal-small {
    padding-left: $grid-content-padding-small;
    padding-right: $grid-content-padding-small;
}

%pad-large {
	padding: $grid-content-padding-large;
}

%pad-vertical-large {
    padding-top: $grid-content-padding-large;
    padding-bottom: $grid-content-padding-large;
}

%pad-horizontal-large {
    padding-left: $grid-content-padding-large;
    padding-right: $grid-content-padding-large;
}

%pad-none {
	padding: 0 !important;
}

%pad-vertical-none {
	padding-top: 0 !important;
	padding-bottom: 0 !important;
}

%pad-horizontal-none {
	padding-left: 0 !important;
	padding-right: 0 !important;
}

// Shared Grid Components
%grid { @include _grid(); }

// Horizontal Grid Components
%column { @include _column(); }

@for $i from 0 through $grid-columns {
	$fraction-value: if($i / $grid-columns == 1, 100%, $i / $grid-columns);

	$grid-column-fractions: map_merge($grid-column-fractions, ($i: $fraction-value)) !global;
}

@for $i from 0 through $grid-rows {
	$fraction-value: if($i / $grid-rows == 1, 100%, $i / $grid-rows);

	$grid-row-fractions: map_merge($grid-row-fractions, ($i: $fraction-value)) !global;
}

@debug column-width(1/2, $gutter: $grid-column-gutter);

@function round-dcr($num) {
	@return round($num);
}

@each $mq in $grid-column-mqs {
	@include mq($mq) {
		$suffix: if($mq == 'all', '', -#{$mq});

		@each $fraction-key, $fraction-value in $grid-column-fractions {
			$is-named-fraction: type_of($fraction-key) == string;

			@if $is-named-fraction
				and ($grid-columns * $fraction-value) == round-dcr($grid-columns * $fraction-value) {
				%column-#{$fraction-key}#{$suffix} { @extend %column-#{$grid-columns * $fraction-value}#{$suffix}; }

				%column-offset-#{$fraction-key}#{$suffix} { @extend %column-offset-#{$grid-columns * $fraction-value}#{$suffix}; }

				%column-gutter-#{$fraction-key}#{$suffix} { @extend %column-gutter-#{$grid-columns * $fraction-value}#{$suffix}; }

				%column-gutter-offset-#{$fraction-key}#{$suffix} { @extend %column-gutter-offset-#{$grid-columns * $fraction-value}#{$suffix}; }

				%column-push-#{$fraction-key}#{$suffix} { @extend %column-push-#{$grid-columns * $fraction-value}#{$suffix}; }

				%column-pull-#{$fraction-key}#{$suffix} { @extend %column-pull-#{$grid-columns * $fraction-value}#{$suffix}; }

			} @else {
				%column-#{$fraction-key}#{$suffix} { @include column($fraction-value); }

				%column-offset-#{$fraction-key}#{$suffix} { margin-left: column-offset-width($fraction-value); }

				%column-gutter-#{$fraction-key}#{$suffix} {
					@include column($fraction-value, $gutter: $grid-column-gutter);
				}

				%column-gutter-offset-#{$fraction-key}#{$suffix} {
					margin-left: column-offset-width($fraction-value, $gutter: $grid-column-gutter);
				}

				%column-push-#{$fraction-key}#{$suffix} {
					@if $fraction-value == 0 { left: auto; }
					@else { left: column-width($fraction-value); }
				}

				%column-pull-#{$fraction-key}#{$suffix} {
					@if $fraction-value == 0 { right: auto; }
					@else { right: column-width($fraction-value); }
				}
			}

			@if $fraction-value > 0
				and (1 / $fraction-value) == round-dcr(1 / $fraction-value) {
				%columns-#{$fraction-key} {
					&#{$suffix} > * {
						@extend %column-#{$fraction-key}#{$suffix};
						height: auto;

						&:nth-child(n+1) {
							clear: none;
						}

						&:nth-child(#{1 / $fraction-value}n+1) {
							clear: left;
						}
					}

					&-border#{$suffix} > * {
						&:not(:nth-child(#{1 / $fraction-value}n + 1)) {
							border-left-width: 0 !important;
						}

						&:nth-child(n + #{1 / $fraction-value + 1}) {
							border-top-width: 0 !important;
						}
					}
				}

				%columns-gutter-#{$fraction-key}#{$suffix} > * {
					&, &:nth-child(n) {				
						@extend %column-gutter-#{$fraction-key}#{$suffix};
						margin-bottom: $grid-column-gutter;
						height: auto;
					}

					&:nth-child(n+1) {
						clear: none;
					}

					&:nth-child(#{1 / $fraction-value}n + 1) {
						clear: left;
					}

					&:nth-child(#{1 / $fraction-value}n) {
						margin-right: 0;
					}
				}
			}
		}

		%column-left#{$suffix}, %columns-left#{$suffix} > * { 
			float: left;
		}

		%column-right#{$suffix}, %columns-right#{$suffix} > * {
			float: right;
		}

		%column-center#{$suffix}, %columns-center#{$suffix} > * { 
			margin-left: auto; 
			margin-right: auto;
			float: none;
		}

		%column-auto#{$suffix}, %columns-auto#{$suffix} > * {
			height: auto !important;
		}
	}
}

// Vertical Grid Components
%row { @include _row(); }

@each $mq in $grid-row-mqs {
	@include mq($mq) {
		$suffix: -#{$mq};
		@if $mq == 'all' { $suffix: ''; }

		@each $fraction-key, $fraction-value in $grid-row-fractions {
			$is-named-fraction: type_of($fraction-key) == string;

			@if $is-named-fraction
				and ($grid-rows * $fraction-value) == round-dcr($grid-rows * $fraction-value) {
				%row-#{$fraction-key}#{$suffix} { @extend %row-#{$grid-rows * $fraction-value}#{$suffix}; }

				// %row-offset-#{$fraction-key}#{$suffix} { @extend %row-offset-#{$grid-rows * $fraction-value}#{suffix}; }

				%row-gutter-#{$fraction-key}#{$suffix} { @extend %row-gutter-#{$grid-rows * $fraction-value}#{$suffix}; }

				// %row-gutter-offset#{$fraction-key}#{$suffix} { @extend %row-gutter-offset#{$grid-columns * $fraction-value}#{$suffix}; }

				%row-push-#{$fraction-key}#{$suffix} { @extend %row-push-#{$grid-rows * $fraction-value}#{$suffix}; }

				%row-pull-#{$fraction-key}#{$suffix} { @extend %row-pull-#{$grid-rows * $fraction-value}#{$suffix}; }
			} @else {
				%row-#{$fraction-key}#{$suffix} { @include row($fraction-value); }

				// %row-offset-#{$fraction-key}#{$suffix} { margin-left: row-offset-width($fraction-value); }

				%row-gutter-#{$fraction-key}#{$suffix} {
					@include row($fraction-value, $gutter: $grid-row-gutter);
				}

				// %row-gutter-offset#{$fraction-key}#{$suffix} {
				// 	margin-left: row-offset-width($fraction-value, $gutter: $grid-row-gutter);
				// }

				%row-push-#{$fraction-key}#{$suffix} {
					top: row-width($fraction-value);
				}

				%row-pull-#{$fraction-key}#{$suffix} {
					bottom: row-width($fraction-value);
				}
			}

			%rows-gutter-#{$fraction-key}#{$suffix} > * {
				&, &:nth-child(n) {
					@extend %row-gutter-#{$fraction-key}#{$suffix};
				}
			}
		}

		%row-bottom#{$suffix}, %rows-bottom#{$suffix} > * { 
			position: absolute;
			bottom: 0;
			left: 0;
		}

		%row-top#{$suffix}, %rows-top#{$suffix} > * {
			// TODO - see if necessary
		}

		%row-center#{$suffix}, %rows-center#{$suffix} > * { 
			top: 50%;
			@include transform(translateY(-50%));
		}
	}
}

@each $mq in $grid-stack-mqs {
	@include mq($mq) {
		$suffix: -#{$mq};
		@if $mq == 'all' { $suffix: ''; }

		%stack#{$suffix} {
			display: block;
			float: none;
			width: 100% !important;
			height: auto;
		}
	}
}