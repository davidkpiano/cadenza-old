// 
// Grid Components
// ===============

%content, %pad {
    padding: $grid-content-padding;
}

%pad-vertical {
    padding-top: $grid-content-padding;
    padding-bottom: $grid-content-padding;
}

%pad-horizontal {
    padding-left: $grid-content-padding;
    padding-right: $grid-content-padding;
}

%pad-small {
	padding: $grid-content-padding-small;
}

%pad-vertical-small {
    padding-top: $grid-content-padding-small;
    padding-bottom: $grid-content-padding-small;
}

%pad-horizontal-small {
    padding-left: $grid-content-padding-small;
    padding-right: $grid-content-padding-small;
}

%pad-large {
	padding: $grid-content-padding-large;
}

%pad-vertical-large {
    padding-top: $grid-content-padding-large;
    padding-bottom: $grid-content-padding-large;
}

%pad-horizontal-large {
    padding-left: $grid-content-padding-large;
    padding-right: $grid-content-padding-large;
}

%pad-none {
	padding: 0 !important;
}

%pad-vertical-none {
	padding-top: 0 !important;
	padding-bottom: 0 !important;
}

%pad-horizontal-none {
	padding-left: 0 !important;
	padding-right: 0 !important;
}

// Shared Grid Components
%grid { @include _grid(); }

// Horizontal Grid Components
%column { @include _column(); }

@each $mq in $grid-column-mqs {
	@include mq($mq) {
		$suffix: -#{$mq};
		@if $mq == 'all' { $suffix: ''; }

		// %column#{$suffix} { @include _column(); }

		@for $i from 0 through $grid-columns {
			%column-#{$i}#{$suffix} {
				// @extend %column#{$suffix};
				@include column($i);
			}

			%column-gutter-#{$i}#{$suffix} {
				// @extend %column#{$suffix};
				@include column($i, $gutter: $grid-column-gutter);
			}

			%columns-gutter#{$suffix} > * {
				&:last-child {
					margin-right: 0;
				}
			}

			%columns-#{$i}#{$suffix} {
				> * {				
					@extend %column-#{$i}#{$suffix};
					height: auto;

					@if $i > 0 and round($grid-columns / $i) == $grid-columns / $i {
						&:nth-child(n+1) {
							clear: none;
						}

						&:nth-child(#{$grid-columns / $i}n + 1) {
							clear: left;
						}
					}
				}

				&-border > * {
					@if $i > 0 and round($grid-columns / $i) == $grid-columns / $i {
						&:not(:nth-child(#{$grid-columns / $i}n + 1)) {
							border-left-width: 0 !important;
						}

						&:nth-child(n+#{($grid-columns / $i)+1}) {
							border-top-width: 0 !important;
						}
					}
				}
			}

			%columns-gutter-#{$i}#{$suffix} > * {

				&, &:nth-child(n) {				
					@extend %column-gutter-#{$i}#{$suffix};
					margin-bottom: $grid-column-gutter;
					height: auto;
				}

				@if $i > 0 and round($grid-columns / $i) == $grid-columns / $i {
					&:nth-child(n+1) {
						clear: none;
					}

					&:nth-child(#{$grid-columns / $i}n + 1) {
						clear: left;
					}

					&:nth-child(#{$grid-columns / $i}n) {
						margin-right: 0;
					}
				}
			}

			%column-offset-#{$i}#{$suffix} {
				// @extend %column#{$suffix};
				margin-left: column-offset-width($i);
			}

			%column-gutter-offset-#{$i}#{$suffix} {
				// @extend %column#{$suffix};
				margin-left: column-offset-width($i, $gutter: $grid-column-gutter);
			}

			%columns-offset-#{$i}#{$suffix} > * {
				@extend %column-offset-#{$i}#{$suffix};
			}

			%column-push-#{$i}#{$suffix} {
				@if $i == 0 { left: auto; }
				@else { left: column-width($i); }
			}

			%columns-push-#{$i}#{$suffix} > * {
				@extend %column-push-#{$i}#{$suffix};
			}

			%column-pull-#{$i}#{$suffix} {
				@if $i == 0 { right: auto; }
				@else { right: column-width($i); }
			}

			%columns-pull-#{$i}#{$suffix} > * {
				@extend %column-pull-#{$i}#{$suffix};
			}
		}

		// TODO: use maps
		@for $i from 1 through length($grid-fractions) {
			$fraction: nth($grid-fractions, $i);
			$denominator: $i + 1;

			%column-#{$fraction}#{$suffix} {
				// @extend %column#{$suffix};

				@if ($grid-columns / $denominator) == round($grid-columns / $denominator) {
					@extend %column-#{$grid-columns / $denominator}#{$suffix};
				} @else {
					@include column(1 / $denominator);
				}
			}

			%columns-#{$fraction}#{$suffix} > * {
				@extend %column-#{$fraction}#{$suffix};
				height: auto;

				&:nth-child(n+1) {
					clear: none;
				}

				&:nth-child(#{$denominator}n+1) {
					clear: left;
				}
			}

			%column-offset-#{$fraction}#{$suffix} {
				// @extend %column#{$suffix};
				
				@if ($grid-columns / $denominator) == round($grid-columns / $denominator) {
					@extend %column-offset-#{$grid-columns / $denominator}#{$suffix};
				} @else {
					margin-left: column-width(1 / $denominator);
				}
			}

			%columns-offset-#{$fraction}#{$suffix} > * {
				@extend %column-offset-#{$fraction}#{$suffix};
			}

			%column-push-#{$fraction}#{$suffix} {
				@if $i == 0 { left: auto; }
				@else { left: column-width(1 / $denominator); }
			}

			%columns-push-#{$fraction}#{$suffix} > * {
				@extend %column-push-#{$fraction}#{$suffix};
			}

			%column-pull-#{$fraction}#{$suffix} {
				@if $i == 0 { right: auto; }
				@else { right: column-width(1 / $denominator); }
			}

			%columns-pull-#{$fraction}#{$suffix} > * {
				@extend %column-pull-#{$fraction}#{$suffix};
			}
		}

		%column-left#{$suffix}, %columns-left#{$suffix} > * { 
			float: left;
		}

		%column-right#{$suffix}, %columns-right#{$suffix} > * {
			float: right;
		}

		%column-center#{$suffix}, %columns-center#{$suffix} > * { 
			margin-left: auto; 
			margin-right: auto;
			float: none;
		}

		%column-auto#{$suffix}, %columns-auto#{$suffix} > * {
			height: auto !important;
		}

		// Parent class
		%columns-middle#{$suffix} {
			display: table;

			> * {
				float: none;
				display: table-cell;
				vertical-align: middle;
			}
		}
	}
}

// Vertical Grid Components
%row { @include _row(); }

@each $mq in $grid-row-mqs {
	@include mq($mq) {
		$suffix: -#{$mq};
		@if $mq == 'all' { $suffix: ''; }

		%row-#{$mq} { @include _row(); }

		@for $i from 0 through $grid-rows {
			%row-#{$i}#{$suffix} {
				@extend %row-#{$mq};
				@include row($i);
			}

			%rows-#{$i}#{$suffix} > * {
				@extend %row-#{$i}#{$suffix};
			}

			// %row-offset-#{$i}#{$suffix} {
			// 	@extend %row-#{$mq};
			// 	margin-left: row-height($i);
			// }

			// %rows-offset-#{$i}#{$suffix} > * {
			// 	@extend %row-offset-#{$i}#{$suffix};
			// }

			%row-push-#{$i}#{$suffix} {
				@if $i == 0 { top: auto; }
				@else { top: row-height($i); }
			}

			%rows-push-#{$i}#{$suffix} > * {
				@extend %row-push-#{$i}#{$suffix};
			}

			%row-pull-#{$i}#{$suffix} {
				@if $i == 0 { bottom: auto; }
				@else { bottom: row-height($i); }
			}

			%rows-pull-#{$i}#{$suffix} > * {
				@extend %row-pull-#{$i}#{$suffix};
			}
		}

		// TODO: use maps
		@for $i from 1 through length($grid-fractions) {
			$fraction: nth($grid-fractions, $i);
			$denominator: $i + 1;

			%row-#{$fraction}#{$suffix} {
				@extend %row#{$suffix};

				@if ($grid-rows / $denominator) == round($grid-rows / $denominator) {
					@extend %row-#{$grid-rows / $denominator}#{$suffix};
				} @else {
					@include row(1 / $denominator);
				}
			}

			%rows-#{$fraction}#{$suffix} > * {
				@extend %row-#{$fraction}#{$suffix};
			}

			// %row-offset-#{$fraction}#{$suffix} {
			// 	@extend %row-#{$mq};
				
			// 	@if ($grid-rows / $denominator) == round($grid-rows / $denominator) {
			// 		@extend %row-offset-#{$grid-rows / $denominator}#{$suffix};
			// 	} @else {
			// 		margin-left: row-height(1 / $denominator);
			// 	}
			// }

			// %rows-offset-#{$fraction}#{$suffix} > * {
			// 	@extend %row-offset-#{$fraction}#{$suffix};
			// }

			%row-push-#{$fraction}#{$suffix} {
				@if $i == 0 { top: auto; }
				@else { top: row-height(1 / $denominator); }
			}

			%rows-push-#{$fraction}#{$suffix} > * {
				@extend %row-push-#{$fraction}#{$suffix};
			}

			%row-pull-#{$fraction}#{$suffix} {
				@if $i == 0 { bottom: auto; }
				@else { bottom: row-height(1 / $denominator); }
			}

			%rows-pull-#{$fraction}#{$suffix} > * {
				@extend %row-pull-#{$fraction}#{$suffix};
			}
		}

		%row-bottom#{$suffix}, %rows-bottom#{$suffix} > * { 
			position: absolute;
			bottom: 0;
			left: 0;
		}

		%row-top#{$suffix}, %rows-top#{$suffix} > * {
			// TODO - see if necessary
		}

		%row-center#{$suffix}, %rows-center#{$suffix} > * { 
			top: 50%;
			@include transform(translateY(-50%));
		}
	}
}